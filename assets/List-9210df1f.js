import{r as e,bc as t,bb as n,bY as r,y as o,X as i,ba as u,aM as a,a6 as c,a7 as l,bZ as s,aU as f,bu as v,b8 as d,b_ as h,t as g}from"./index-32c3f4bc.js";var m=e.forwardRef((function(u,a){var c=u.height,l=u.offsetY,s=u.offsetX,f=u.children,v=u.prefixCls,d=u.onInnerResize,h=u.innerProps,g=u.rtl,m=u.extra,p={},b={display:"flex",flexDirection:"column"};return void 0!==l&&(p={height:c,position:"relative",overflow:"hidden"},b=t(t({},b),{},n(n(n(n(n({transform:"translateY(".concat(l,"px)")},g?"marginRight":"marginLeft",-s),"position","absolute"),"left",0),"right",0),"top",0))),e.createElement("div",{style:p},e.createElement(r,{onResize:function(e){e.offsetHeight&&d&&d()}},e.createElement("div",o({style:b,className:i(n({},"".concat(v,"-holder-inner"),v)),ref:a},h),f,m)))}));function p(e,t){return("touches"in e?e.touches[0]:e)[t?"pageX":"pageY"]}m.displayName="Filler";var b=e.forwardRef((function(r,o){var c=r.prefixCls,l=r.rtl,s=r.scrollOffset,f=r.scrollRange,v=r.onStartMove,d=r.onStopMove,h=r.onScroll,g=r.horizontal,m=r.spinSize,b=r.containerSize,M=r.style,S=r.thumbStyle,E=e.useState(!1),R=u(E,2),w=R[0],y=R[1],x=e.useState(null),L=u(x,2),H=L[0],T=L[1],z=e.useState(null),Y=u(z,2),N=Y[0],k=Y[1],D=!l,C=e.useRef(),I=e.useRef(),P=e.useState(!1),O=u(P,2),X=O[0],j=O[1],A=e.useRef(),_=function(){clearTimeout(A.current),j(!0),A.current=setTimeout((function(){j(!1)}),3e3)},K=f-b||0,B=b-m||0,V=e.useMemo((function(){return 0===s||0===K?0:s/K*B}),[s,K,B]),W=e.useRef({top:V,dragging:w,pageY:H,startTop:N});W.current={top:V,dragging:w,pageY:H,startTop:N};var F=function(e){y(!0),T(p(e,g)),k(W.current.top),v(),e.stopPropagation(),e.preventDefault()};e.useEffect((function(){var e=function(e){e.preventDefault()},t=C.current,n=I.current;return t.addEventListener("touchstart",e),n.addEventListener("touchstart",F),function(){t.removeEventListener("touchstart",e),n.removeEventListener("touchstart",F)}}),[]);var U=e.useRef();U.current=K;var Z=e.useRef();Z.current=B,e.useEffect((function(){if(w){var e,t=function(t){var n=W.current,r=n.dragging,o=n.pageY,i=n.startTop;if(a.cancel(e),r){var u=p(t,g)-o,c=i;!D&&g?c-=u:c+=u;var l=U.current,s=Z.current,f=s?c/s:0,v=Math.ceil(f*l);v=Math.max(v,0),v=Math.min(v,l),e=a((function(){h(v,g)}))}},n=function(){y(!1),d()};return window.addEventListener("mousemove",t),window.addEventListener("touchmove",t),window.addEventListener("mouseup",n),window.addEventListener("touchend",n),function(){window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),a.cancel(e)}}}),[w]),e.useEffect((function(){_()}),[s]),e.useImperativeHandle(o,(function(){return{delayHidden:_}}));var q="".concat(c,"-scrollbar"),G={position:"absolute",visibility:X?null:"hidden"},J={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return g?(G.height=8,G.left=0,G.right=0,G.bottom=0,J.height="100%",J.width=m,D?J.left=V:J.right=V):(G.width=8,G.top=0,G.bottom=0,D?G.right=0:G.left=0,J.width="100%",J.height=m,J.top=V),e.createElement("div",{ref:C,className:i(q,n(n(n({},"".concat(q,"-horizontal"),g),"".concat(q,"-vertical"),!g),"".concat(q,"-visible"),X)),style:t(t({},G),M),onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},onMouseMove:_},e.createElement("div",{ref:I,className:i("".concat(q,"-thumb"),n({},"".concat(q,"-thumb-moving"),w)),style:t(t({},J),S),onMouseDown:F}))}));function M(t){var n=t.children,r=t.setRef,o=e.useCallback((function(e){r(e)}),[]);return e.cloneElement(n,{ref:o})}var S=function(){function e(){l(this,e),n(this,"maps",void 0),n(this,"id",0),this.maps=Object.create(null)}return c(e,[{key:"set",value:function(e,t){this.maps[e]=t,this.id+=1}},{key:"get",value:function(e){return this.maps[e]}}]),e}();var E=10;function R(t,n,r){var o=e.useState(t),i=u(o,2),a=i[0],c=i[1],l=e.useState(null),s=u(l,2),f=s[0],v=s[1];return e.useEffect((function(){var e=function(e,t,n){var r,o,i=e.length,u=t.length;if(0===i&&0===u)return null;i<u?(r=e,o=t):(r=t,o=e);var a={__EMPTY_ITEM__:!0};function c(e){return void 0!==e?n(e):a}for(var l=null,s=1!==Math.abs(i-u),f=0;f<o.length;f+=1){var v=c(r[f]);if(v!==c(o[f])){l=f,s=s||v!==c(o[f+1]);break}}return null===l?null:{index:l,multiple:s}}(a||[],t||[],n);void 0!==(null==e?void 0:e.index)&&(null==r||r(e.index),v(t[e.index])),c(t)}),[t]),[f]}var w="object"===("undefined"==typeof navigator?"undefined":v(navigator))&&/Firefox/i.test(navigator.userAgent);const y=function(t,n){var r=e.useRef(!1),o=e.useRef(null);var i=e.useRef({top:t,bottom:n});return i.current.top=t,i.current.bottom=n,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e<0&&i.current.top||e>0&&i.current.bottom;return t&&n?(clearTimeout(o.current),r.current=!1):n&&!r.current||(clearTimeout(o.current),r.current=!0,o.current=setTimeout((function(){r.current=!1}),50)),!r.current&&n}};function x(t,n,r,o,i){var u=e.useRef(0),c=e.useRef(null),l=e.useRef(null),s=e.useRef(!1),f=y(n,r);var v=e.useRef(null),d=e.useRef(null);return[function(e){if(t){a.cancel(d.current),d.current=a((function(){v.current=null}),2);var n=e.deltaX,r=e.deltaY,h=e.shiftKey,g=n,m=r;("sx"===v.current||!v.current&&h&&r&&!n)&&(g=r,m=0,v.current="sx");var p=Math.abs(g),b=Math.abs(m);null===v.current&&(v.current=o&&p>b?"x":"y"),"y"===v.current?function(e,t){a.cancel(c.current),u.current+=t,l.current=t,f(t)||(w||e.preventDefault(),c.current=a((function(){var e=s.current?10:1;i(u.current*e),u.current=0})))}(e,m):function(e,t){i(t,!0),w||e.preventDefault()}(e,g)}},function(e){t&&(s.current=e.detail===l.current)}]}var L=14/15;var H=20;function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)*e;return isNaN(t)&&(t=0),t=Math.max(t,H),Math.floor(t)}var z=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Y=[],N={overflowY:"auto",overflowAnchor:"none"};function k(c,l){var p=c.prefixCls,w=void 0===p?"rc-virtual-list":p,H=c.className,k=c.height,D=c.itemHeight,C=c.fullHeight,I=void 0===C||C,P=c.style,O=c.data,X=c.children,j=c.itemKey,A=c.virtual,_=c.direction,K=c.scrollWidth,B=c.component,V=void 0===B?"div":B,W=c.onScroll,F=c.onVirtualScroll,U=c.onVisibleChange,Z=c.innerProps,q=c.extraRender,G=c.styles,J=d(c,z),Q=e.useCallback((function(e){return"function"==typeof j?j(e):null==e?void 0:e[j]}),[j]),$=function(t,n,r){var o=e.useState(0),i=u(o,2),c=i[0],l=i[1],f=e.useRef(new Map),v=e.useRef(new S),d=e.useRef();function h(){a.cancel(d.current)}function g(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h();var t=function(){f.current.forEach((function(e,t){if(e&&e.offsetParent){var n=s(e),r=n.offsetHeight;v.current.get(t)!==r&&v.current.set(t,n.offsetHeight)}})),l((function(e){return e+1}))};e?t():d.current=a(t)}return e.useEffect((function(){return h}),[]),[function(e,o){var i=t(e),u=f.current.get(i);o?(f.current.set(i,o),g()):f.current.delete(i),!u!=!o&&(o?null==n||n(e):null==r||r(e))},g,v.current,c]}(Q,null,null),ee=u($,4),te=ee[0],ne=ee[1],re=ee[2],oe=ee[3],ie=!(!1===A||!k||!D),ue=e.useMemo((function(){return Object.values(re.maps).reduce((function(e,t){return e+t}),0)}),[re.id,re.maps]),ae=ie&&O&&(Math.max(D*O.length,ue)>k||!!K),ce="rtl"===_,le=i(w,n({},"".concat(w,"-rtl"),ce),H),se=O||Y,fe=e.useRef(),ve=e.useRef(),de=e.useState(0),he=u(de,2),ge=he[0],me=he[1],pe=e.useState(0),be=u(pe,2),Me=be[0],Se=be[1],Ee=e.useState(!1),Re=u(Ee,2),we=Re[0],ye=Re[1],xe=function(){ye(!0)},Le=function(){ye(!1)},He={getKey:Q};function Te(e){me((function(t){var n=function(e){var t=e;Number.isNaN(Ue.current)||(t=Math.min(t,Ue.current));return t=Math.max(t,0),t}("function"==typeof e?e(t):e);return fe.current.scrollTop=n,n}))}var ze=e.useRef({start:0,end:se.length}),Ye=e.useRef(),Ne=R(se,Q),ke=u(Ne,1)[0];Ye.current=ke;var De=e.useMemo((function(){if(!ie)return{scrollHeight:void 0,start:0,end:se.length-1,offset:void 0};var e;if(!ae)return{scrollHeight:(null===(e=ve.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:se.length-1,offset:void 0};for(var t,n,r,o=0,i=se.length,u=0;u<i;u+=1){var a=se[u],c=Q(a),l=re.get(c),s=o+(void 0===l?D:l);s>=ge&&void 0===t&&(t=u,n=o),s>ge+k&&void 0===r&&(r=u),o=s}return void 0===t&&(t=0,n=0,r=Math.ceil(k/D)),void 0===r&&(r=se.length-1),{scrollHeight:o,start:t,end:r=Math.min(r+1,se.length-1),offset:n}}),[ae,ie,ge,se,oe,k]),Ce=De.scrollHeight,Ie=De.start,Pe=De.end,Oe=De.offset;ze.current.start=Ie,ze.current.end=Pe;var Xe=e.useState({width:0,height:k}),je=u(Xe,2),Ae=je[0],_e=je[1],Ke=e.useRef(),Be=e.useRef(),Ve=e.useMemo((function(){return T(Ae.width,K)}),[Ae.width,K]),We=e.useMemo((function(){return T(Ae.height,Ce)}),[Ae.height,Ce]),Fe=Ce-k,Ue=e.useRef(Fe);Ue.current=Fe;var Ze=ge<=0,qe=ge>=Fe,Ge=y(Ze,qe),Je=function(){return{x:ce?-Me:Me,y:ge}},Qe=e.useRef(Je()),$e=h((function(){if(F){var e=Je();Qe.current.x===e.x&&Qe.current.y===e.y||(F(e),Qe.current=e)}}));function et(e,t){var n=e;t?(g.flushSync((function(){Se(n)})),$e()):Te(n)}var tt=function(e){var t=e,n=K?K-Ae.width:0;return t=Math.max(t,0),t=Math.min(t,n)},nt=h((function(e,t){t?(g.flushSync((function(){Se((function(t){return tt(t+(ce?-e:e))}))})),$e()):Te((function(t){return t+e}))})),rt=x(ie,Ze,qe,!!K,nt),ot=u(rt,2),it=ot[0],ut=ot[1];!function(t,n,r){var o,i=e.useRef(!1),u=e.useRef(0),a=e.useRef(null),c=e.useRef(null),l=function(e){if(i.current){var t=Math.ceil(e.touches[0].pageY),n=u.current-t;u.current=t,r(n)&&e.preventDefault(),clearInterval(c.current),c.current=setInterval((function(){(!r(n*=L,!0)||Math.abs(n)<=.1)&&clearInterval(c.current)}),16)}},s=function(){i.current=!1,o()},v=function(e){o(),1!==e.touches.length||i.current||(i.current=!0,u.current=Math.ceil(e.touches[0].pageY),a.current=e.target,a.current.addEventListener("touchmove",l),a.current.addEventListener("touchend",s))};o=function(){a.current&&(a.current.removeEventListener("touchmove",l),a.current.removeEventListener("touchend",s))},f((function(){return t&&n.current.addEventListener("touchstart",v),function(){var e;null===(e=n.current)||void 0===e||e.removeEventListener("touchstart",v),o(),clearInterval(c.current)}}),[t])}(ie,fe,(function(e,t){return!Ge(e,t)&&(it({preventDefault:function(){},deltaY:e}),!0)})),f((function(){function e(e){ie&&e.preventDefault()}var t=fe.current;return t.addEventListener("wheel",it),t.addEventListener("DOMMouseScroll",ut),t.addEventListener("MozMousePixelScroll",e),function(){t.removeEventListener("wheel",it),t.removeEventListener("DOMMouseScroll",ut),t.removeEventListener("MozMousePixelScroll",e)}}),[ie]),f((function(){K&&Se((function(e){return tt(e)}))}),[Ae.width,K]);var at=function(){var e,t;null===(e=Ke.current)||void 0===e||e.delayHidden(),null===(t=Be.current)||void 0===t||t.delayHidden()},ct=function(n,r,o,i,c,l,s,d){var h=e.useRef(),g=e.useState(null),m=u(g,2),p=m[0],b=m[1];return f((function(){if(p&&p.times<E){if(!n.current)return void b((function(e){return t({},e)}));l();var e=p.targetAlign,u=p.originAlign,a=p.index,f=p.offset,v=n.current.clientHeight,d=!1,h=e,g=null;if(v){for(var m=e||u,M=0,S=0,R=0,w=Math.min(r.length-1,a),y=0;y<=w;y+=1){var x=c(r[y]);S=M;var L=o.get(x);M=R=S+(void 0===L?i:L)}for(var H="top"===m?f:v-f,T=w;T>=0;T-=1){var z=c(r[T]),Y=o.get(z);if(void 0===Y){d=!0;break}if((H-=Y)<=0)break}switch(m){case"top":g=S-f;break;case"bottom":g=R-v+f;break;default:var N=n.current.scrollTop;S<N?h="top":R>N+v&&(h="bottom")}null!==g&&s(g),g!==p.lastTop&&(d=!0)}d&&b(t(t({},p),{},{times:p.times+1,targetAlign:h,lastTop:g}))}}),[p,n.current]),function(e){if(null!=e){if(a.cancel(h.current),"number"==typeof e)s(e);else if(e&&"object"===v(e)){var t,n=e.align;t="index"in e?e.index:r.findIndex((function(t){return c(t)===e.key}));var o=e.offset;b({times:0,index:t,offset:void 0===o?0:o,originAlign:n})}}else d()}}(fe,se,re,D,Q,(function(){return ne(!0)}),Te,at);e.useImperativeHandle(l,(function(){return{getScrollInfo:Je,scrollTo:function(e){var t;(t=e)&&"object"===v(t)&&("left"in t||"top"in t)?(void 0!==e.left&&Se(tt(e.left)),ct(e.top)):ct(e)}}})),f((function(){if(U){var e=se.slice(Ie,Pe+1);U(e,se)}}),[Ie,Pe,se]);var lt=function(t,n,r,o){var i=e.useMemo((function(){return[new Map,[]]}),[t,r.id,o]),a=u(i,2),c=a[0],l=a[1];return function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,u=c.get(e),a=c.get(i);if(void 0===u||void 0===a)for(var s=t.length,f=l.length;f<s;f+=1){var v,d=t[f],h=n(d);c.set(h,f);var g=null!==(v=r.get(h))&&void 0!==v?v:o;if(l[f]=(l[f-1]||0)+g,h===e&&(u=f),h===i&&(a=f),void 0!==u&&void 0!==a)break}return{top:l[u-1]||0,bottom:l[a]}}}(se,Q,re,D),st=null==q?void 0:q({start:Ie,end:Pe,virtual:ae,offsetX:Me,offsetY:Oe,rtl:ce,getSize:lt}),ft=function(t,n,r,o,i,u,a){var c=a.getKey;return t.slice(n,r+1).map((function(t,r){var a=u(t,n+r,{style:{width:o}}),l=c(t);return e.createElement(M,{key:l,setRef:function(e){return i(t,e)}},a)}))}(se,Ie,Pe,K,te,X,He),vt=null;k&&(vt=t(n({},I?"height":"maxHeight",k),N),ie&&(vt.overflowY="hidden",K&&(vt.overflowX="hidden"),we&&(vt.pointerEvents="none")));var dt={};return ce&&(dt.dir="rtl"),e.createElement("div",o({style:t(t({},P),{},{position:"relative"}),className:le},dt,J),e.createElement(r,{onResize:function(e){_e({width:e.width||e.offsetWidth,height:e.height||e.offsetHeight})}},e.createElement(V,{className:"".concat(w,"-holder"),style:vt,ref:fe,onScroll:function(e){var t=e.currentTarget.scrollTop;t!==ge&&Te(t),null==W||W(e),$e()},onMouseEnter:at},e.createElement(m,{prefixCls:w,height:Ce,offsetX:Me,offsetY:Oe,scrollWidth:K,onInnerResize:ne,ref:ve,innerProps:Z,rtl:ce,extra:st},ft))),ae&&Ce>k&&e.createElement(b,{ref:Ke,prefixCls:w,scrollOffset:ge,scrollRange:Ce,rtl:ce,onScroll:et,onStartMove:xe,onStopMove:Le,spinSize:We,containerSize:Ae.height,style:null==G?void 0:G.verticalScrollBar,thumbStyle:null==G?void 0:G.verticalScrollBarThumb}),ae&&K>Ae.width&&e.createElement(b,{ref:Be,prefixCls:w,scrollOffset:Me,scrollRange:K,rtl:ce,onScroll:et,onStartMove:xe,onStopMove:Le,spinSize:Ve,containerSize:Ae.width,horizontal:!0,style:null==G?void 0:G.horizontalScrollBar,thumbStyle:null==G?void 0:G.horizontalScrollBarThumb}))}var D=e.forwardRef(k);D.displayName="List";export{D as L};
