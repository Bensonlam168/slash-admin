import{r as i,z as I,a6 as k,A as z,B as D,D as M,a7 as O,a8 as B,a9 as L,u as H,$ as P,a1 as U,j as l,a3 as C,a4 as $}from"./index-a27b517f.js";import{ReturnButton as q}from"./ReturnButton-d1f209b8.js";import{F as S}from"./index-800e126e.js";import{R as A,C as b}from"./row-1f18a80c.js";const V=e=>{const{value:t,formatter:s,precision:n,decimalSeparator:m,groupSeparator:u="",prefixCls:a}=e;let r;if(typeof s=="function")r=s(t);else{const o=String(t),d=o.match(/^(-?)(\d*)(\.(\d+))?$/);if(!d||o==="-")r=o;else{const f=d[1];let c=d[2]||"0",p=d[4]||"";c=c.replace(/\B(?=(\d{3})+(?!\d))/g,u),typeof n=="number"&&(p=p.padEnd(n,"0").slice(0,n>0?n:0)),p&&(p=`${m}${p}`),r=[i.createElement("span",{key:"int",className:`${a}-content-value-int`},f,c),p&&i.createElement("span",{key:"decimal",className:`${a}-content-value-decimal`},p)]}}return i.createElement("span",{className:`${a}-content-value`},r)},X=V,_=e=>{const{componentCls:t,marginXXS:s,padding:n,colorTextDescription:m,titleFontSize:u,colorTextHeading:a,contentFontSize:r,fontFamily:o}=e;return{[`${t}`]:Object.assign(Object.assign({},z(e)),{[`${t}-title`]:{marginBottom:s,color:m,fontSize:u},[`${t}-skeleton`]:{paddingTop:n},[`${t}-content`]:{color:a,fontSize:r,fontFamily:o,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:s},[`${t}-content-suffix`]:{marginInlineStart:s}}})}},Y=I("Statistic",e=>{const t=k(e,{});return[_(t)]},e=>{const{fontSizeHeading3:t,fontSize:s}=e;return{titleFontSize:s,contentFontSize:t}}),G=e=>{const{prefixCls:t,className:s,rootClassName:n,style:m,valueStyle:u,value:a=0,title:r,valueRender:o,prefix:d,suffix:f,loading:c=!1,onMouseEnter:p,onMouseLeave:v,decimalSeparator:h=".",groupSeparator:N=","}=e,{getPrefixCls:E,direction:w,statistic:x}=i.useContext(D),g=E("statistic",t),[T,F]=Y(g),y=i.createElement(X,Object.assign({decimalSeparator:h,groupSeparator:N,prefixCls:g},e,{value:a})),R=M(g,{[`${g}-rtl`]:w==="rtl"},x?.className,s,n,F);return T(i.createElement("div",{className:R,style:Object.assign(Object.assign({},x?.style),m),onMouseEnter:p,onMouseLeave:v},r&&i.createElement("div",{className:`${g}-title`},r),i.createElement(O,{paragraph:!1,loading:c,className:`${g}-skeleton`},i.createElement("div",{style:u,className:`${g}-content`},d&&i.createElement("span",{className:`${g}-content-prefix`},d),o?o(y):y,f&&i.createElement("span",{className:`${g}-content-suffix`},f)))))},j=G,J=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function K(e,t){let s=e;const n=/\[[^\]]*]/g,m=(t.match(n)||[]).map(o=>o.slice(1,-1)),u=t.replace(n,"[]"),a=J.reduce((o,d)=>{let[f,c]=d;if(o.includes(f)){const p=Math.floor(s/c);return s-=p*c,o.replace(new RegExp(`${f}+`,"g"),v=>{const h=v.length;return p.toString().padStart(h,"0")})}return o},u);let r=0;return a.replace(n,()=>{const o=m[r];return r+=1,o})}function Q(e,t){const{format:s=""}=t,n=new Date(e).getTime(),m=Date.now(),u=Math.max(n-m,0);return K(u,s)}const W=1e3/30;function Z(e){return new Date(e).getTime()}const ee=e=>{const{value:t,format:s="HH:mm:ss",onChange:n,onFinish:m}=e,u=B(),a=i.useRef(null),r=()=>{m?.(),a.current&&(clearInterval(a.current),a.current=null)},o=()=>{const c=Z(t);c>=Date.now()&&(a.current=setInterval(()=>{u(),n?.(c-Date.now()),c<Date.now()&&r()},W))};i.useEffect(()=>(o(),()=>{a.current&&(clearInterval(a.current),a.current=null)}),[t]);const d=(c,p)=>Q(c,Object.assign(Object.assign({},p),{format:s})),f=c=>L(c,{title:void 0});return i.createElement(j,Object.assign({},e,{valueRender:f,formatter:d}))},te=i.memo(ee);j.Countdown=te;const{Countdown:ne}=j;function ie(){const{t:e}=H(),t=f=>{console.log("Received values of form: ",f)},[s,n]=i.useState(0),[m,u]=i.useState(0),{loginState:a,backToLogin:r}=P();if(a!==U.MOBILE)return null;const o=()=>{n(60),u(60)},d=()=>{n(0),u(60)};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-4 text-2xl font-bold xl:text-3xl",children:e("sys.login.mobileSignInFormTitle")}),l.jsxs(S,{name:"normal_login",size:"large",initialValues:{remember:!0},onFinish:t,children:[l.jsx(S.Item,{name:"phone",rules:[{required:!0,message:"Please input your Phone!"}],children:l.jsx(C,{placeholder:e("sys.login.mobile")})}),l.jsx(S.Item,{name:"code",rules:[{required:!0,message:e("sys.login.mobilePlaceholder")}],children:l.jsxs(A,{justify:"space-between",children:[l.jsx(b,{span:14,children:l.jsx(C,{placeholder:e("sys.login.smsCode")})}),l.jsx(b,{span:9,flex:1,children:l.jsx($,{disabled:s!==0,className:"w-full !text-sm",onClick:o,children:s===0?l.jsx("span",{children:e("sys.login.sendSmsButton")}):l.jsxs("div",{className:"flex items-center justify-center",children:[l.jsx(ne,{className:"hidden",value:Date.now()+s*1e3,onChange:f=>{n(Number(f)/1e3),u(Math.floor(Number(f)/1e3))},format:"ss",onFinish:d}),l.jsx("span",{className:"ml-1",children:e("sys.login.sendSmsText",{second:m})})]})})})]})}),l.jsx(S.Item,{children:l.jsx($,{type:"primary",htmlType:"submit",className:"w-full",children:e("sys.login.loginButton")})}),l.jsx(q,{onClick:()=>{d(),r()}})]})]})}export{ie as default};
