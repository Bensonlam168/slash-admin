import{r as e,Q as t,aj as n,U as a,W as s,X as r,Y as l,ak as o,al as i,am as c,u as m,aa as u,ac as p,j as f,ag as d,ah as g}from"./index-a2e26706.js";import{ReturnButton as x}from"./ReturnButton-61356be8.js";import{F as y}from"./index-1741d9ed.js";import{R as h,C as j}from"./row-679e2916.js";const b=t=>{const{value:n,formatter:a,precision:s,decimalSeparator:r,groupSeparator:l="",prefixCls:o}=t;let i;if("function"==typeof a)i=a(n);else{const t=String(n),a=t.match(/^(-?)(\d*)(\.(\d+))?$/);if(a&&"-"!==t){const t=a[1];let n=a[2]||"0",c=a[4]||"";n=n.replace(/\B(?=(\d{3})+(?!\d))/g,l),"number"==typeof s&&(c=c.padEnd(s,"0").slice(0,s>0?s:0)),c&&(c=`${r}${c}`),i=[e.createElement("span",{key:"int",className:`${o}-content-value-int`},t,n),c&&e.createElement("span",{key:"decimal",className:`${o}-content-value-decimal`},c)]}else i=t}return e.createElement("span",{className:`${o}-content-value`},i)},v=e=>{const{componentCls:t,marginXXS:n,padding:s,colorTextDescription:r,titleFontSize:l,colorTextHeading:o,contentFontSize:i,fontFamily:c}=e;return{[`${t}`]:Object.assign(Object.assign({},a(e)),{[`${t}-title`]:{marginBottom:n,color:r,fontSize:l},[`${t}-skeleton`]:{paddingTop:s},[`${t}-content`]:{color:o,fontSize:i,fontFamily:c,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:n},[`${t}-content-suffix`]:{marginInlineStart:n}}})}},S=t("Statistic",(e=>{const t=n(e,{});return[v(t)]}),(e=>{const{fontSizeHeading3:t,fontSize:n}=e;return{titleFontSize:n,contentFontSize:t}}));var O=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n};const N=t=>{const{prefixCls:n,className:a,rootClassName:i,style:c,valueStyle:m,value:u=0,title:p,valueRender:f,prefix:d,suffix:g,loading:x=!1,formatter:y,precision:h,decimalSeparator:j=".",groupSeparator:v=",",onMouseEnter:N,onMouseLeave:$}=t,w=O(t,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:E,direction:C,statistic:F}=e.useContext(s),T=E("statistic",n),[I,M,k]=S(T),P=e.createElement(b,{decimalSeparator:j,groupSeparator:v,prefixCls:T,formatter:y,precision:h,value:u}),z=r(T,{[`${T}-rtl`]:"rtl"===C},null==F?void 0:F.className,a,i,M,k),D=l(w,{aria:!0,data:!0});return I(e.createElement("div",Object.assign({},D,{className:z,style:Object.assign(Object.assign({},null==F?void 0:F.style),c),onMouseEnter:N,onMouseLeave:$}),p&&e.createElement("div",{className:`${T}-title`},p),e.createElement(o,{paragraph:!1,loading:x,className:`${T}-skeleton`},e.createElement("div",{style:m,className:`${T}-content`},d&&e.createElement("span",{className:`${T}-content-prefix`},d),f?f(P):P,g&&e.createElement("span",{className:`${T}-content-suffix`},g)))))},$=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function w(e,t){const{format:n=""}=t,a=new Date(e).getTime(),s=Date.now();return function(e,t){let n=e;const a=/\[[^\]]*]/g,s=(t.match(a)||[]).map((e=>e.slice(1,-1))),r=t.replace(a,"[]"),l=$.reduce(((e,t)=>{let[a,s]=t;if(e.includes(a)){const t=Math.floor(n/s);return n-=t*s,e.replace(new RegExp(`${a}+`,"g"),(e=>{const n=e.length;return t.toString().padStart(n,"0")}))}return e}),r);let o=0;return l.replace(a,(()=>{const e=s[o];return o+=1,e}))}(Math.max(a-s,0),n)}var E=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n};const C=1e3/30;const F=t=>{const{value:n,format:a="HH:mm:ss",onChange:s,onFinish:r}=t,l=E(t,["value","format","onChange","onFinish"]),o=i(),m=e.useRef(null),u=()=>{const e=function(e){return new Date(e).getTime()}(n);e>=Date.now()&&(m.current=setInterval((()=>{o(),null==s||s(e-Date.now()),e<Date.now()&&(null==r||r(),m.current&&(clearInterval(m.current),m.current=null))}),C))};e.useEffect((()=>(u(),()=>{m.current&&(clearInterval(m.current),m.current=null)})),[n]);return e.createElement(N,Object.assign({},l,{value:n,valueRender:e=>c(e,{title:void 0}),formatter:(e,t)=>w(e,Object.assign(Object.assign({},t),{format:a}))}))},T=e.memo(F);N.Countdown=T;const{Countdown:I}=N;function M(){const{t:t}=m(),[n,a]=e.useState(0),[s,r]=e.useState(0),{loginState:l,backToLogin:o}=u();if(l!==p.MOBILE)return null;const i=()=>{a(0),r(60)};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"mb-4 text-2xl font-bold xl:text-3xl",children:t("sys.login.mobileSignInFormTitle")}),f.jsxs(y,{name:"normal_login",size:"large",initialValues:{remember:!0},onFinish:e=>{},children:[f.jsx(y.Item,{name:"phone",rules:[{required:!0,message:"Please input your Phone!"}],children:f.jsx(d,{placeholder:t("sys.login.mobile")})}),f.jsx(y.Item,{name:"code",rules:[{required:!0,message:t("sys.login.mobilePlaceholder")}],children:f.jsxs(h,{justify:"space-between",children:[f.jsx(j,{span:14,children:f.jsx(d,{placeholder:t("sys.login.smsCode")})}),f.jsx(j,{span:9,flex:1,children:f.jsx(g,{disabled:0!==n,className:"w-full !text-sm",onClick:()=>{a(60),r(60)},children:0===n?f.jsx("span",{children:t("sys.login.sendSmsButton")}):f.jsxs("div",{className:"flex items-center justify-center",children:[f.jsx(I,{className:"hidden",value:Date.now()+1e3*n,onChange:e=>{a(Number(e)/1e3),r(Math.floor(Number(e)/1e3))},format:"ss",onFinish:i}),f.jsx("span",{className:"ml-1",children:t("sys.login.sendSmsText",{second:s})})]})})})]})}),f.jsx(y.Item,{children:f.jsx(g,{type:"primary",htmlType:"submit",className:"w-full",children:t("sys.login.loginButton")})}),f.jsx(x,{onClick:()=>{i(),o()}})]})]})}export{M as default};
