import{ba as se,bb as D,bc as re,bd as V,be as K,bf as ne,bg as ie,bh as ae,bi as _,bj as le,bk as w,a as h,bl as oe,bm as ce,bn as ue,bo as he,g as de,C as B,n as fe,b3 as pe,c as A,B as Q,bp as me,bq as ye,E as G,ay as ge,b8 as be,t as ve,av as xe,A as a,ar as Re,a2 as W,J as U,aC as T,aD as $,at as q,br as Ce,bs as Se}from"./index-d8577bd1.js";import{T as Oe}from"./Table-68967165.js";import{F as v}from"./index-e5ec7822.js";import{R as Ee,C as F}from"./row-6c2d4fc1.js";import{S as N}from"./index-52599c97.js";import{g as H,P as Ie,a as je}from"./index-a4e59ec8.js";import{I as Pe}from"./index-c94dae7c.js";import{R as k}from"./index-555c241b.js";import"./addEventListener-393cffef.js";import"./Pagination-f132500a.js";import"./index-43c38e98.js";import"./index-8e60414a.js";import"./extendsObject-1e0cd48d.js";class we extends se{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),X(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return z(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return z(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){const r=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),D(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const n=this.hasListeners();n&&Y(this.currentQuery,i,this.options,r)&&this.executeFetch(),this.updateResult(t),n&&(this.currentQuery!==i||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();n&&(this.currentQuery!==i||this.options.enabled!==r.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const t=this.client.getQueryCache().build(this.client,e),r=this.createResult(t,e);return Te(this,r,e)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(e){const t={};return Object.keys(e).forEach(r=>{Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){const t=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,t);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:(t=e.cancelRefetch)!=null?t:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(re)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),V||this.currentResult.isStale||!K(this.options.staleTime))return;const t=ne(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},t)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(V||this.options.enabled===!1||!K(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||ie.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){const r=this.currentQuery,i=this.options,n=this.currentResult,o=this.currentResultState,c=this.currentResultOptions,p=e!==r,l=p?e.state:this.currentQueryInitialState,d=p?this.currentResult:this.previousQueryResult,{state:f}=e;let{dataUpdatedAt:x,error:R,errorUpdatedAt:E,fetchStatus:b,status:m}=f,C=!1,S=!1,g;if(t._optimisticResults){const u=this.hasListeners(),y=!u&&X(e,t),P=u&&Y(e,r,t,i);(y||P)&&(b=ae(e.options.networkMode)?"fetching":"paused",x||(m="loading")),t._optimisticResults==="isRestoring"&&(b="idle")}if(t.keepPreviousData&&!f.dataUpdatedAt&&d!=null&&d.isSuccess&&m!=="error")g=d.data,x=d.dataUpdatedAt,m=d.status,C=!0;else if(t.select&&typeof f.data<"u")if(n&&f.data===o?.data&&t.select===this.selectFn)g=this.selectResult;else try{this.selectFn=t.select,g=t.select(f.data),g=_(n?.data,g,t),this.selectResult=g,this.selectError=null}catch(u){this.selectError=u}else g=f.data;if(typeof t.placeholderData<"u"&&typeof g>"u"&&m==="loading"){let u;if(n!=null&&n.isPlaceholderData&&t.placeholderData===c?.placeholderData)u=n.data;else if(u=typeof t.placeholderData=="function"?t.placeholderData():t.placeholderData,t.select&&typeof u<"u")try{u=t.select(u),this.selectError=null}catch(y){this.selectError=y}typeof u<"u"&&(m="success",g=_(n?.data,u,t),S=!0)}this.selectError&&(R=this.selectError,g=this.selectResult,E=Date.now(),m="error");const I=b==="fetching",O=m==="loading",j=m==="error";return{status:m,fetchStatus:b,isLoading:O,isSuccess:m==="success",isError:j,isInitialLoading:O&&I,data:g,dataUpdatedAt:x,error:R,errorUpdatedAt:E,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>l.dataUpdateCount||f.errorUpdateCount>l.errorUpdateCount,isFetching:I,isRefetching:I&&!O,isLoadingError:j&&f.dataUpdatedAt===0,isPaused:b==="paused",isPlaceholderData:S,isPreviousData:C,isRefetchError:j&&f.dataUpdatedAt!==0,isStale:L(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){const t=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,D(r,t))return;this.currentResult=r;const i={cache:!0},n=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,c=typeof o=="function"?o():o;if(c==="all"||!c&&!this.trackedProps.size)return!0;const p=new Set(c??this.trackedProps);return this.options.useErrorBoundary&&p.add("error"),Object.keys(this.currentResult).some(l=>{const d=l;return this.currentResult[d]!==t[d]&&p.has(d)})};e?.listeners!==!1&&n()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const t={};e.type==="success"?t.onSuccess=!e.manual:e.type==="error"&&!le(e.error)&&(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){w.batch(()=>{if(e.onSuccess){var t,r,i,n;(t=(r=this.options).onSuccess)==null||t.call(r,this.currentResult.data),(i=(n=this.options).onSettled)==null||i.call(n,this.currentResult.data,null)}else if(e.onError){var o,c,p,l;(o=(c=this.options).onError)==null||o.call(c,this.currentResult.error),(p=(l=this.options).onSettled)==null||p.call(l,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:d})=>{d(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function Qe(s,e){return e.enabled!==!1&&!s.state.dataUpdatedAt&&!(s.state.status==="error"&&e.retryOnMount===!1)}function X(s,e){return Qe(s,e)||s.state.dataUpdatedAt>0&&z(s,e,e.refetchOnMount)}function z(s,e,t){if(e.enabled!==!1){const r=typeof t=="function"?t(s):t;return r==="always"||r!==!1&&L(s,e)}return!1}function Y(s,e,t,r){return t.enabled!==!1&&(s!==e||r.enabled===!1)&&(!t.suspense||s.state.status!=="error")&&L(s,t)}function L(s,e){return s.isStaleByTime(e.staleTime)}function Te(s,e,t){return t.keepPreviousData?!1:t.placeholderData!==void 0?e.isPlaceholderData:!D(s.getCurrentResult(),e)}const J=h.createContext(!1),Fe=()=>h.useContext(J);J.Provider;function Ne(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}const ke=h.createContext(Ne()),De=()=>h.useContext(ke),Ue=(s,e)=>{(s.suspense||s.useErrorBoundary)&&(e.isReset()||(s.retryOnMount=!1))},ze=s=>{h.useEffect(()=>{s.clearReset()},[s])},Be=({result:s,errorResetBoundary:e,useErrorBoundary:t,query:r})=>s.isError&&!e.isReset()&&!s.isFetching&&oe(t,[s.error,r]),Ae=s=>{s.suspense&&typeof s.staleTime!="number"&&(s.staleTime=1e3)},Le=(s,e)=>s.isLoading&&s.isFetching&&!e,Me=(s,e,t)=>s?.suspense&&Le(e,t),Ve=(s,e,t)=>e.fetchOptimistic(s).then(({data:r})=>{s.onSuccess==null||s.onSuccess(r),s.onSettled==null||s.onSettled(r,null)}).catch(r=>{t.clearReset(),s.onError==null||s.onError(r),s.onSettled==null||s.onSettled(void 0,r)});function Ke(s,e){const t=ce({context:s.context}),r=Fe(),i=De(),n=t.defaultQueryOptions(s);n._optimisticResults=r?"isRestoring":"optimistic",n.onError&&(n.onError=w.batchCalls(n.onError)),n.onSuccess&&(n.onSuccess=w.batchCalls(n.onSuccess)),n.onSettled&&(n.onSettled=w.batchCalls(n.onSettled)),Ae(n),Ue(n,i),ze(i);const[o]=h.useState(()=>new e(t,n)),c=o.getOptimisticResult(n);if(ue(h.useCallback(p=>{const l=r?()=>{}:o.subscribe(w.batchCalls(p));return o.updateResult(),l},[o,r]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),h.useEffect(()=>{o.setOptions(n,{listeners:!1})},[n,o]),Me(n,c,r))throw Ve(n,o,i);if(Be({result:c,errorResetBoundary:i,useErrorBoundary:n.useErrorBoundary,query:o.getCurrentQuery()}))throw c.error;return n.notifyOnChangeProps?c:o.trackResult(c)}function _e(s,e,t){const r=he(s,e,t);return Ke(r,we)}const We=s=>{const{componentCls:e,iconCls:t,antCls:r,zIndexPopup:i,colorText:n,colorWarning:o,marginXXS:c,marginXS:p,fontSize:l,fontWeightStrong:d,colorTextHeading:f}=s;return{[e]:{zIndex:i,[`&${r}-popover`]:{fontSize:l},[`${e}-message`]:{marginBottom:p,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e}-message-icon ${t}`]:{color:o,fontSize:l,lineHeight:1,marginInlineEnd:p},[`${e}-title`]:{fontWeight:d,color:f,"&:only-child":{fontWeight:"normal"}},[`${e}-description`]:{marginTop:c,color:n}},[`${e}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:p}}}}},Z=de("Popconfirm",s=>We(s),s=>{const{zIndexPopupBase:e}=s;return{zIndexPopup:e+60}},{resetStyle:!1});var $e=globalThis&&globalThis.__rest||function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t};const ee=s=>{const{prefixCls:e,okButtonProps:t,cancelButtonProps:r,title:i,description:n,cancelText:o,okText:c,okType:p="primary",icon:l=h.createElement(G,null),showCancel:d=!0,close:f,onConfirm:x,onCancel:R,onPopupClick:E}=s,{getPrefixCls:b}=h.useContext(B),[m]=fe("Popconfirm",pe.Popconfirm),C=H(i),S=H(n);return h.createElement("div",{className:`${e}-inner-content`,onClick:E},h.createElement("div",{className:`${e}-message`},l&&h.createElement("span",{className:`${e}-message-icon`},l),h.createElement("div",{className:`${e}-message-text`},C&&h.createElement("div",{className:A(`${e}-title`)},C),S&&h.createElement("div",{className:`${e}-description`},S))),h.createElement("div",{className:`${e}-buttons`},d&&h.createElement(Q,Object.assign({onClick:R,size:"small"},r),o??m?.cancelText),h.createElement(me,{buttonProps:Object.assign(Object.assign({size:"small"},ye(p)),t),actionFn:x,close:f,prefixCls:b("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},c??m?.okText)))},qe=s=>{const{prefixCls:e,placement:t,className:r,style:i}=s,n=$e(s,["prefixCls","placement","className","style"]),{getPrefixCls:o}=h.useContext(B),c=o("popconfirm",e),[p]=Z(c);return p(h.createElement(Ie,{placement:t,className:A(c,r),style:i,content:h.createElement(ee,Object.assign({prefixCls:c},n))}))},He=qe;var Xe=globalThis&&globalThis.__rest||function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t};const te=h.forwardRef((s,e)=>{const{prefixCls:t,placement:r="top",trigger:i="click",okType:n="primary",icon:o=h.createElement(G,null),children:c,overlayClassName:p,onOpenChange:l,onVisibleChange:d}=s,f=Xe(s,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:x}=h.useContext(B),[R,E]=ge(!1,{value:s.open,defaultValue:s.defaultOpen}),b=(u,y)=>{E(u,!0),d?.(u),l?.(u,y)},m=u=>{b(!1,u)},C=u=>{var y;return(y=s.onConfirm)===null||y===void 0?void 0:y.call(globalThis,u)},S=u=>{var y;b(!1,u),(y=s.onCancel)===null||y===void 0||y.call(globalThis,u)},g=u=>{u.keyCode===xe.ESC&&R&&b(!1,u)},I=u=>{const{disabled:y=!1}=s;y||b(u)},O=x("popconfirm",t),j=A(O,p),[M]=Z(O);return M(h.createElement(je,Object.assign({},be(f,["title"]),{trigger:i,placement:r,onOpenChange:I,open:R,ref:e,overlayClassName:j,content:h.createElement(ee,Object.assign({okType:n,icon:o},s,{prefixCls:O,close:m,onConfirm:C,onCancel:S})),"data-popover-inject":!0}),ve(c,{onKeyDown:u=>{var y,P;h.isValidElement(c)&&((P=c==null?void 0:(y=c.props).onKeyDown)===null||P===void 0||P.call(y,u)),g(u)}})))});te._InternalPanelDoNotUseOrYouWillBeFired=He;const Ye=te;function ht(){const[s]=v.useForm(),[e,t]=h.useState({formValue:{id:"",name:"",status:"enable"},title:"New",show:!1,onOk:()=>{t(l=>({...l,show:!1}))},onCancel:()=>{t(l=>({...l,show:!1}))}}),r=[{title:"Name",dataIndex:"name",width:300},{title:"Order",dataIndex:"order",align:"center",width:60},{title:"Status",dataIndex:"status",align:"center",width:120,render:l=>a.jsx(T,{color:l==="enable"?"success":"error",children:l})},{title:"Desc",dataIndex:"desc",align:"center",width:300},{title:"Action",key:"operation",align:"center",width:100,render:(l,d)=>a.jsxs("div",{className:"flex w-full justify-center text-gray",children:[a.jsx($,{onClick:()=>p(d),children:a.jsx(q,{icon:"solar:pen-bold-duotone",size:18})}),a.jsx(Ye,{title:"Delete the Organization",okText:"Yes",cancelText:"No",placement:"left",children:a.jsx($,{children:a.jsx(q,{icon:"mingcute:delete-2-fill",size:18,className:"text-error"})})})]})}],i={onChange:(l,d)=>{console.log(`selectedRowKeys: ${l}`,"selectedRows: ",d)},onSelect:(l,d,f)=>{console.log(l,d,f)},onSelectAll:(l,d,f)=>{console.log(l,d,f)}},{data:n}=_e({queryKey:["orgs"],queryFn:Se.getOrgList}),o=()=>{s.resetFields()},c=()=>{t(l=>({...l,show:!0,title:"Create New",formValue:{...l.formValue,id:"",name:"",order:1,desc:"",status:"enable"}}))},p=l=>{t(d=>({...d,show:!0,title:"Edit",formValue:l}))};return a.jsxs(Re,{direction:"vertical",size:"large",className:"w-full",children:[a.jsx(W,{children:a.jsx(v,{form:s,children:a.jsxs(Ee,{gutter:[16,16],children:[a.jsx(F,{span:24,lg:6,children:a.jsx(v.Item,{label:"Name",name:"name",className:"!mb-0",children:a.jsx(U,{})})}),a.jsx(F,{span:24,lg:6,children:a.jsx(v.Item,{label:"Status",name:"status",className:"!mb-0",children:a.jsxs(N,{children:[a.jsx(N.Option,{value:"enable",children:a.jsx(T,{color:"success",children:"Enable"})}),a.jsx(N.Option,{value:"disable",children:a.jsx(T,{color:"error",children:"Disable"})})]})})}),a.jsx(F,{span:24,lg:12,children:a.jsxs("div",{className:"flex justify-end",children:[a.jsx(Q,{onClick:o,children:"Reset"}),a.jsx(Q,{type:"primary",className:"ml-4",children:"Search"})]})})]})})}),a.jsx(W,{title:"Organization List",extra:a.jsx(Q,{type:"primary",onClick:c,children:"New"}),children:a.jsx(Oe,{rowKey:"id",size:"small",scroll:{x:"max-content"},pagination:!1,columns:r,dataSource:n,rowSelection:{...i}})}),a.jsx(Ge,{...e})]})}function Ge({title:s,show:e,formValue:t,onOk:r,onCancel:i}){const[n]=v.useForm();return console.log("formValue",t),h.useEffect(()=>{n.setFieldsValue({...t})},[t,n]),a.jsx(Ce,{title:s,open:e,onOk:r,onCancel:i,children:a.jsxs(v,{initialValues:t,form:n,labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",style:{maxWidth:600},children:[a.jsx(v.Item,{label:"Name",name:"name",required:!0,children:a.jsx(U,{})}),a.jsx(v.Item,{label:"Order",name:"order",required:!0,children:a.jsx(Pe,{})}),a.jsx(v.Item,{label:"Status",name:"status",required:!0,children:a.jsxs(k.Group,{optionType:"button",children:[a.jsx(k,{value:"enable",children:" Enable "}),a.jsx(k,{value:"disable",children:" Disable "})]})}),a.jsx(v.Item,{label:"Desc",name:"desc",children:a.jsx(U.TextArea,{})})]})})}export{ht as default};
