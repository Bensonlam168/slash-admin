import{K as s,r as t,dA as e,j as a,dB as r,dx as n,dy as o,aj as i,ak as l,I as d}from"./index-657a8674.js";import c from"./kanban-column-2344a762.js";import{T as m,a as u,D as p}from"./kanban-task-a1d738e0.js";import"./task-detail-cbe95bb5.js";import"./dayjs.min-e5b9177f.js";import"./index-dc0c0e8b.js";import"./index-685782fb.js";import"./index-bf917f38.js";import"./useIcons-93da2f1c.js";import"./index-4b5beffa.js";import"./index-4ca02689.js";import"./index-a80c1dce.js";import"./addEventListener-fc984ebb.js";import"./index-d1071a44.js";import"./List-a6b614bc.js";const k=t=>{const e=[];for(let a=0;a<t;a+=1)e.push({username:s.person.fullName(),avatar:s.image.avatarGitHub(),content:s.lorem.lines({min:1,max:3}),time:s.date.past()});return e},f=t=>{const e=[];for(let a=0;a<t;a+=1)e.push(s.image.urlPicsumPhotos());return e},x=t=>{const e=[];for(let a=0;a<t;a+=1)e.push(s.image.avatarGitHub());return e},g=t=>{const e=[],a=new Set;for(;e.length<t;){const t=s.helpers.enumValue(u);a.has(t)||(e.push(t),a.add(t))}return e},j={tasks:{"task-1":{id:"task-1",title:s.lorem.words(3),reporter:s.image.avatarGitHub(),priority:m.LOW,tags:[],comments:[],attachments:[]},"task-2":{id:"task-2",title:s.lorem.words(3),reporter:s.image.avatarGitHub(),assignee:x(1),date:s.date.future(),priority:m.HIGH,tags:g(3),comments:k(1),attachments:f(4)},"task-3":{id:"task-3",title:s.lorem.words(4),reporter:s.image.avatarGitHub(),assignee:x(2),priority:m.MEDIUM,date:s.date.future(),tags:g(2),comments:k(2),attachments:[]},"task-4":{id:"task-4",title:s.lorem.words(5),reporter:s.image.avatarGitHub(),assignee:x(3),priority:m.MEDIUM,tags:g(3),date:s.date.future(),description:s.lorem.lines(5),attachments:[],comments:k(3)},"task-5":{id:"task-5",title:s.lorem.words(4),reporter:s.image.avatarGitHub(),priority:m.HIGH,assignee:x(4),tags:g(4),date:s.date.future(),description:s.lorem.lines(3),attachments:[],comments:k(4)},"task-6":{id:"task-6",title:s.lorem.words(5),reporter:s.image.avatarGitHub(),priority:m.LOW,assignee:x(5),tags:g(5),date:s.date.future(),description:s.lorem.lines(4),attachments:f(5),comments:k(4)}},columns:{"column-1":{id:"column-1",title:"To do",taskIds:["task-1","task-2","task-3"]},"column-2":{id:"column-2",title:"In progress",taskIds:["task-4","task-5"]},"column-3":{id:"column-3",title:"Done",taskIds:["task-6"]}},columnOrder:["column-1","column-2","column-3"]};function I(){const[m,u]=t.useState(j),[k,f]=t.useState(!1),x=t.useRef(null);e("click",(t=>{if(x.current&&!x.current.input?.contains(t.target)){const t=x.current.input?.value;t&&g({id:s.string.uuid(),title:t,taskIds:[]}),f(!1)}}));const g=s=>{const t={...m,columns:{...m.columns,[s.id]:s},columnOrder:[...m.columnOrder,s.id]};u(t)},I=(s,t)=>{const e=m.columns[s],a={...m,tasks:{...m.tasks,[t.id]:t},columns:{...m.columns,[s]:{...e,taskIds:[...e.taskIds,t.id]}}};u(a)},h=s=>{const t=m.columns[s],e=Object.keys(m.tasks).filter((s=>!t.taskIds.includes(s))).reduce(((s,t)=>(s[t]=m.tasks[t],s)),{}),a=Object.keys(m.columns).filter((t=>t!==s)).reduce(((s,t)=>(s[t]=m.columns[t],s)),{}),r=Array.from(m.columnOrder).filter((t=>t!==s));u({tasks:e,columns:a,columnOrder:r})},b=s=>{const t=m.columns[s],e=Object.keys(m.tasks).filter((s=>!t.taskIds.includes(s))).reduce(((s,t)=>(s[t]=m.tasks[t],s)),{}),a={...m.columns,[s]:{...t,taskIds:[]}},r={...m,tasks:e,columns:a};u(r)},y=s=>{const{id:t,title:e}=s,a={...m.columns,[t]:{...m.columns[t],title:e}},r={...m,columns:a};u(r)};return a.jsx(r,{children:a.jsxs("div",{className:"flex",children:[a.jsx(n,{onDragEnd:s=>{const{source:t,destination:e,type:a}=s;e&&(e.droppableId===t.droppableId&&e.index===t.index||(a===p.COLUMN?(s=>{const{source:t,destination:e,draggableId:a}=s,r=Array.from(m.columnOrder);r.splice(t.index,1),r.splice(e.index,0,a);const n={...m,columnOrder:r};u(n)})(s):(s=>{const{source:t,destination:e,draggableId:a}=s,r=m.columns[t.droppableId],n=m.columns[e.droppableId];if(r===n){const s=Array.from(r.taskIds);s.splice(t.index,1),s.splice(e.index,0,a);const n={...r,taskIds:s},o={...m,columns:{...m.columns,[n.id]:n}};u(o)}else{const s=Array.from(r.taskIds);s.splice(t.index,1);const o={...r,taskIds:s},i=Array.from(n.taskIds);i.splice(e.index,0,a);const l={...n,taskIds:i},d={...m,columns:{...m.columns,[o.id]:o,[l.id]:l}};u(d)}})(s)))},children:a.jsx(o,{droppableId:"all-columns",direction:"horizontal",type:p.COLUMN,children:s=>a.jsxs("div",{ref:s.innerRef,...s.droppableProps,className:"flex h-full items-start gap-6 p-1",children:[m.columnOrder.map(((s,t)=>{const e=m.columns[s],r=e.taskIds.map((s=>m.tasks[s]));return a.jsx(c,{index:t,column:e,tasks:r,createTask:I,clearColumn:b,deleteColumn:h,renameColumn:y},s)})),s.placeholder]})})}),a.jsx("div",{className:"ml-[1.6rem] mt-[0.25rem] min-w-[280px]",children:k?a.jsx(i,{ref:x,size:"large",placeholder:"Column Name",autoFocus:!0}):a.jsxs(l,{onClick:s=>{s.stopPropagation(),f(!0)},className:"!inline-flex !w-full items-center justify-center !text-xs !font-semibold",block:!0,size:"large",children:[a.jsx(d,{icon:"carbon:add",size:20}),a.jsx("div",{children:"Add Column"})]})})]})})}export{I as default};
