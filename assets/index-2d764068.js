import{r as t,z as Z,a6 as ee,A as te,ak as re,B,az as ne,bf as se,aY as ae,D as N,aq as oe,al as ie,a9 as le}from"./index-465e3387.js";import{P as ce}from"./index-a252f7ce.js";const ge=t.createContext({}),A=ge,de=e=>{const{antCls:s,componentCls:n,iconCls:r,avatarBg:i,avatarColor:C,containerSize:v,containerSizeLG:c,containerSizeSM:S,textFontSize:d,textFontSizeLG:b,textFontSizeSM:R,borderRadius:m,borderRadiusLG:p,borderRadiusSM:z,lineWidth:y,lineType:E}=e,$=(f,g,O)=>({width:f,height:f,lineHeight:`${f-y*2}px`,borderRadius:"50%",[`&${n}-square`]:{borderRadius:O},[`${n}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${n}-icon`]:{fontSize:g,[`> ${r}`]:{margin:0}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},te(e)),{position:"relative",display:"inline-block",overflow:"hidden",color:C,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:i,border:`${y}px ${E} transparent`,"&-image":{background:"transparent"},[`${s}-image-img`]:{display:"block"}}),$(v,d,m)),{"&-lg":Object.assign({},$(c,b,p)),"&-sm":Object.assign({},$(S,R,z)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},ue=e=>{const{componentCls:s,groupBorderColor:n,groupOverlapping:r,groupSpace:i}=e;return{[`${s}-group`]:{display:"inline-flex",[`${s}`]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:r}},[`${s}-group-popover`]:{[`${s} + ${s}`]:{marginInlineStart:i}}}},H=Z("Avatar",e=>{const{colorTextLightSolid:s,colorTextPlaceholder:n}=e,r=ee(e,{avatarBg:n,avatarColor:s});return[de(r),ue(r)]},e=>{const{controlHeight:s,controlHeightLG:n,controlHeightSM:r,fontSize:i,fontSizeLG:C,fontSizeXL:v,fontSizeHeading3:c,marginXS:S,marginXXS:d,colorBorderBg:b}=e;return{containerSize:s,containerSizeLG:n,containerSizeSM:r,textFontSize:Math.round((C+v)/2),textFontSizeLG:c,textFontSizeSM:i,groupSpace:d,groupOverlapping:-S,groupBorderColor:b}});var me=globalThis&&globalThis.__rest||function(e,s){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)s.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const pe=(e,s)=>{const[n,r]=t.useState(1),[i,C]=t.useState(!1),[v,c]=t.useState(!0),S=t.useRef(null),d=t.useRef(null),b=re(s,S),{getPrefixCls:R,avatar:m}=t.useContext(B),p=t.useContext(A),z=()=>{if(!d.current||!S.current)return;const a=d.current.offsetWidth,o=S.current.offsetWidth;if(a!==0&&o!==0){const{gap:u=4}=e;u*2<o&&r(o-u*2<a?(o-u*2)/a:1)}};t.useEffect(()=>{C(!0)},[]),t.useEffect(()=>{c(!0),r(1)},[e.src]),t.useEffect(z,[e.gap]);const y=()=>{const{onError:a}=e;a?.()!==!1&&c(!1)},{prefixCls:E,shape:$,size:f,src:g,srcSet:O,icon:h,className:P,rootClassName:F,alt:_,draggable:W,children:w,crossOrigin:X}=e,k=me(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),l=ne(a=>{var o,u;return(u=(o=f??p?.size)!==null&&o!==void 0?o:a)!==null&&u!==void 0?u:"default"}),q=Object.keys(typeof l=="object"?l||{}:{}).some(a=>["xs","sm","md","lg","xl","xxl"].includes(a)),I=se(q),V=t.useMemo(()=>{if(typeof l!="object")return{};const a=ae.find(u=>I[u]),o=l[a];return o?{width:o,height:o,lineHeight:`${o}px`,fontSize:h?o/2:18}:{}},[I,l]),x=R("avatar",E),[D,Y]=H(x),J=N({[`${x}-lg`]:l==="large",[`${x}-sm`]:l==="small"}),G=t.isValidElement(g),K=$||p?.shape||"circle",Q=N(x,J,m?.className,`${x}-${K}`,{[`${x}-image`]:G||g&&v,[`${x}-icon`]:!!h},P,F,Y),U=typeof l=="number"?{width:l,height:l,lineHeight:`${l}px`,fontSize:h?l/2:18}:{};let j;if(typeof g=="string"&&v)j=t.createElement("img",{src:g,draggable:W,srcSet:O,onError:y,alt:_,crossOrigin:X});else if(G)j=g;else if(h)j=h;else if(i||n!==1){const a=`scale(${n}) translateX(-50%)`,o={msTransform:a,WebkitTransform:a,transform:a},u=typeof l=="number"?{lineHeight:`${l}px`}:{};j=t.createElement(oe,{onResize:z},t.createElement("span",{className:`${x}-string`,ref:d,style:Object.assign(Object.assign({},u),o)},w))}else j=t.createElement("span",{className:`${x}-string`,style:{opacity:0},ref:d},w);return delete k.onError,delete k.gap,D(t.createElement("span",Object.assign({},k,{style:Object.assign(Object.assign(Object.assign(Object.assign({},U),V),m?.style),k.style),className:Q,ref:b}),j))},fe=t.forwardRef(pe),L=fe,M=e=>{const{size:s,shape:n}=t.useContext(A),r=t.useMemo(()=>({size:e.size||s,shape:e.shape||n}),[e.size,e.shape,s,n]);return t.createElement(A.Provider,{value:r},e.children)},he=e=>{const{getPrefixCls:s,direction:n}=t.useContext(B),{prefixCls:r,className:i,rootClassName:C,style:v,maxCount:c,maxStyle:S,size:d,shape:b,maxPopoverPlacement:R="top",maxPopoverTrigger:m="hover",children:p}=e,z=s("avatar",r),y=`${z}-group`,[E,$]=H(z),f=N(y,{[`${y}-rtl`]:n==="rtl"},i,C,$),g=ie(p).map((h,P)=>le(h,{key:`avatar-key-${P}`})),O=g.length;if(c&&c<O){const h=g.slice(0,c),P=g.slice(c,O);return h.push(t.createElement(ce,{key:"avatar-popover-key",content:P,trigger:m,placement:R,overlayClassName:`${y}-popover`},t.createElement(L,{style:S},`+${O-c}`))),E(t.createElement(M,{shape:b,size:d},t.createElement("div",{className:f,style:v},h)))}return E(t.createElement(M,{shape:b,size:d},t.createElement("div",{className:f,style:v},g)))},ve=he,T=L;T.Group=ve;const be=T;export{be as A};
