import{ak as W,w as V,A as e,V as H,aq as R,aV as Z,P as D,J as L,a as v,am as K,cl as ee,cm as se,U as te,cn as _,as as g,co as ae,aW as B,al as $,cp as Y,bn as ne,B as U,cq as q,ae as r,cr as re,cs as ie}from"./index-8d572e46.js";import{d as F}from"./dayjs.min-5017cfba.js";import{A as M}from"./index-461fbc9a.js";import{D as le}from"./index-6b405c39.js";import{R as T}from"./index-6a0e2995.js";import{I as Q}from"./index-51fe351b.js";import{S as oe}from"./index-2278d8c2.js";import"./index-ffff8da2.js";import"./index-e74e209f.js";import"./addEventListener-d8b913f4.js";var h=(s=>(s.LOW="Low",s.MEDIUM="Medium",s.HIGH="High",s))(h||{}),J=(s=>(s.frontend="FrontEnd",s.backend="BackEnd",s.fullstack="FullStack",s.DevOps="DevOps",s.AI="AI",s.DBA="DBA",s.UI="UI",s.UE="UE",s.QA="QA",s))(J||{}),E=(s=>(s.COLUMN="column",s.TASK="task",s))(E||{});function ce({task:s}){const{title:a,reporter:c,assignee:p=[],tags:w=[],date:f,priority:y,description:j,attachments:S,comments:I=[]}=s,{colorInfo:N,colorWarning:k,colorSuccess:b}=V();return e.jsxs(e.Fragment,{children:[e.jsxs(de,{children:[e.jsx("div",{className:"item",children:e.jsx(H.Title,{level:4,children:a})}),e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"label",children:"Reporter"}),e.jsx(M,{shape:"circle",src:c,size:40})]}),e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"label",children:"Assignee"}),e.jsx(R,{children:p.map((u,t)=>e.jsx(M,{shape:"circle",src:u,size:40},t))})]}),e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"label",children:"Tag"}),e.jsx(R,{wrap:!0,children:w.map(u=>e.jsx(Z,{color:N,children:u},u))})]}),e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"label",children:"Due Date"}),e.jsx(le,{bordered:!1,value:F(f)})]}),e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"label",children:"Priority"}),e.jsx("div",{children:e.jsx(T.Group,{defaultValue:y,children:e.jsxs(R,{children:[e.jsxs(T.Button,{value:"High",children:[e.jsx(D,{icon:"ic_rise",size:20,color:k}),e.jsx("span",{children:"High"})]}),e.jsxs(T.Button,{value:"Medium",children:[e.jsx(D,{icon:"ic_rise",size:20,color:b,className:"rotate-90"}),e.jsx("span",{children:"Medium"})]}),e.jsxs(T.Button,{value:"Low",children:[e.jsx(D,{icon:"ic_rise",size:20,color:N,className:"rotate-180"}),e.jsx("span",{children:"Low"})]})]})})})]}),e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"label",children:"Description"}),e.jsx(L.TextArea,{defaultValue:j})]}),e.jsxs("div",{className:"item",children:[e.jsx("div",{className:"label",children:"Attachments"}),e.jsx(R,{wrap:!0,children:S?.map(u=>e.jsx(Q,{src:u,width:62,height:62,className:"rounded-lg"},u))})]})]}),e.jsx("div",{className:"flex flex-col gap-4",style:{padding:"24px 20px 40px"},children:I?.map(({avatar:u,username:t,content:n,time:i})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx(M,{src:u,size:40,className:"flex-shrink-0"}),e.jsxs("div",{className:"flex flex-grow flex-col flex-wrap gap-1 text-gray",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(H.Text,{children:t}),e.jsx(H.Text,{children:F(i).format("DD/MM/YYYY HH:mm")})]}),e.jsx("p",{children:n})]})]},t))})]})}const de=W.div`
  display: flex;
  flex-direction: column;
  gap: 24px;
  padding: 24px 20px 40px;
  .item {
    display: flex;
    align-items: center;
  }
  .label {
    text-align: left;
    font-size: 0.75rem;
    font-weight: 600;
    width: 100px;
    flex-shrink: 0;
    color: rgb(99, 115, 129);
    height: 40px;
    line-height: 40px;
  }
`;function me({index:s,task:a}){const{themeMode:c}=K(),[p,w]=v.useState(!1),f=V(),y={backdropFilter:"blur(20px)",backgroundImage:`url("${ee}"), url("${se}")`,backgroundRepeat:"no-repeat, no-repeat",backgroundColor:te(f.colorBgContainer).alpha(.9).toString(),backgroundPosition:"right top, left bottom",backgroundSize:"50, 50%"},j={padding:0},{id:S,title:I,comments:N=[],attachments:k=[],priority:b,assignee:u}=a;return e.jsxs(e.Fragment,{children:[e.jsx(_,{draggableId:S,index:s,children:(t,n)=>e.jsx(pe,{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,$isDragging:n.isDragging,$themeMode:c,children:e.jsxs("div",{children:[k.length>0&&e.jsx(Q,{src:k[0],alt:"",className:"mb-4 rounded-md"}),e.jsxs("div",{onClick:()=>w(!0),children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(xe,{taskPriority:b})}),e.jsx("div",{children:I}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-base text-gray-600",children:[e.jsx(g,{icon:"uim:comment-dots",size:16,className:"mr-1"}),e.jsx("span",{className:"text-xs",children:N.length}),e.jsx(g,{icon:"iconamoon:attachment-bold",size:16,className:"ml-2 mr-1"}),e.jsx("span",{className:"text-xs",children:k.length})]}),u?.length&&e.jsx(M.Group,{maxCount:3,maxStyle:{color:f.colorPrimary,backgroundColor:f.colorPrimaryBg},children:u.map(i=>e.jsx(M,{src:i},i))})]})]})]})})}),e.jsx(ae,{placement:"right",title:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(oe,{defaultValue:"To do",size:"large",bordered:!1,dropdownStyle:{width:"auto"},options:[{value:"To do",label:"To do"},{value:"In progress",label:"In progress"},{value:"Done",label:"Done"}]})}),e.jsxs("div",{className:"flex text-gray",children:[e.jsx(B,{children:e.jsx(g,{icon:"solar:like-bold",size:20,color:f.colorSuccess})}),e.jsx(B,{children:e.jsx(g,{icon:"solar:trash-bin-trash-bold",size:20})}),e.jsx(B,{children:e.jsx(g,{icon:"fontisto:more-v-a",size:20})})]})]}),onClose:()=>w(!1),open:p,closable:!1,width:420,bodyStyle:j,maskStyle:{backgroundColor:"transparent"},style:y,children:e.jsx(ce,{task:a})})]})}const ue=v.memo(me);function xe({taskPriority:s}){const{colorSuccess:a,colorInfo:c,colorWarning:p}=V();switch(s){case h.HIGH:return e.jsx(D,{icon:"ic_rise",size:20,color:p,className:""});case h.MEDIUM:return e.jsx(D,{icon:"ic_rise",size:20,color:a,className:"rotate-90"});case h.LOW:return e.jsx(D,{icon:"ic_rise",size:20,color:c,className:"rotate-180"})}}const pe=W.div`
  width: 248px;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 16px;
  font-weight: 400;
  font-size: 12px;
  background-color: ${s=>s.$themeMode===$.Light?s.$isDragging?"rgba(255, 255, 255, 0.48)":"rgb(255, 255, 255)":s.$isDragging?"rgba(22, 28, 36, 0.48)":"rgb(22, 28, 36)"};
  backdrop-filter: ${s=>s.$isDragging?"blur(6px)":""};

  &:hover {
    box-shadow: ${s=>s.$themeMode===$.Light?"rgba(145, 158, 171, 0.16) 0px 20px 40px -4px":"rgba(0, 0, 0, 0.16) 0px 20px 40px -4px"};
  }
`;function he({index:s,column:a,tasks:c,createTask:p,clearColumn:w,deleteColumn:f,renameColumn:y}){const{themeMode:j}=K(),S={height:"100%",padding:"16px",borderRadius:"16px",backgroundColor:j===$.Light?"rgb(244, 246, 248)":"rgba(145, 158, 171, 0.12)"},I=[{key:"1",label:e.jsxs("div",{className:"flex items-center text-gray",onClick:()=>{n(!0)},children:[e.jsx(g,{icon:"solar:pen-bold"}),e.jsx("span",{className:"ml-2",children:"rename"})]})},{key:"2",label:e.jsxs("div",{className:"flex items-center text-gray",onClick:()=>w(a.id),children:[e.jsx(g,{icon:"solar:eraser-bold"}),e.jsx("span",{className:"ml-2",children:"clear"})]})},{key:"3",label:e.jsxs("div",{className:"flex items-center text-warning",onClick:()=>f(a.id),children:[e.jsx(g,{icon:"solar:trash-bin-trash-bold"}),e.jsx("span",{className:"ml-2",children:"delete"})]})}],[N,k]=v.useState(!1),b=v.useRef(null);Y("click",l=>{if(b.current&&!b.current.input?.contains(l.target)){const o=b.current.input?.value;o&&p(a.id,{id:r.string.uuid(),title:o,reporter:r.image.avatarGitHub(),priority:r.helpers.enumValue(h)}),k(!1)}if(i.current&&!i.current.input?.contains(l.target)){const o=i.current.input?.value;o&&y({...a,title:o}),n(!1)}});const[t,n]=v.useState(!1),i=v.useRef(null),[m,d]=v.useState(!1),x=l=>{d(!1),l.domEvent.stopPropagation()};return e.jsx(_,{draggableId:a.id,index:s,children:l=>e.jsx("div",{ref:l.innerRef,...l.draggableProps,children:e.jsxs("div",{style:S,children:[e.jsxs("header",{...l.dragHandleProps,className:"mb-4 flex select-none items-center justify-between text-base font-semibold",children:[t?e.jsx(L,{ref:i,size:"large",autoFocus:!0}):a.title,e.jsx(ne,{open:m,onOpenChange:o=>d(o),menu:{items:I,onClick:x},placement:"bottomRight",trigger:["click"],children:e.jsx(U,{shape:"circle",type:"text",className:"!text-gray",children:e.jsx(g,{icon:"dashicons:ellipsis"})})})]}),e.jsx(q,{droppableId:a.id,type:E.TASK,children:o=>e.jsxs("main",{ref:o.innerRef,...o.droppableProps,className:"min-h-[10px]",children:[c.map((C,P)=>e.jsx(ue,{task:C,index:P},C.id)),o.placeholder]})}),e.jsx("footer",{className:"w-[248px]",children:N?e.jsx(L,{ref:b,size:"large",placeholder:"Task Name",autoFocus:!0}):e.jsxs(U,{onClick:o=>{o.stopPropagation(),k(!0)},className:"!flex items-center justify-center !text-xs !font-medium",type:"text",block:!0,size:"large",children:[e.jsx(g,{icon:"carbon:add",size:20}),e.jsx("span",{children:"Add Task"})]})})]})})})}const O=s=>{const a=[];for(let c=0;c<s;c+=1)a.push({username:r.person.fullName(),avatar:r.image.avatarLegacy(),content:r.lorem.lines({min:1,max:3}),time:r.date.past()});return a},G=s=>{const a=[];for(let c=0;c<s;c+=1)a.push(r.image.urlPicsumPhotos());return a},z=s=>{const a=[];for(let c=0;c<s;c+=1)a.push(r.image.avatarLegacy());return a},A=s=>{const a=[],c=new Set;for(;a.length<s;){const p=r.helpers.enumValue(J);c.has(p)||(a.push(p),c.add(p))}return a},ge={tasks:{"task-1":{id:"task-1",title:r.lorem.words(3),reporter:r.image.avatarLegacy(),priority:h.LOW,tags:[],comments:[],attachments:[]},"task-2":{id:"task-2",title:r.lorem.words(3),reporter:r.image.avatarLegacy(),assignee:z(1),date:r.date.future(),priority:h.HIGH,tags:A(3),comments:O(1),attachments:G(4)},"task-3":{id:"task-3",title:r.lorem.words(4),reporter:r.image.avatarLegacy(),assignee:z(2),priority:h.MEDIUM,date:r.date.future(),tags:A(2),comments:O(2),attachments:[]},"task-4":{id:"task-4",title:r.lorem.words(5),reporter:r.image.avatar(),assignee:z(3),priority:h.MEDIUM,tags:A(3),date:r.date.future(),description:r.lorem.lines(5),attachments:[],comments:O(3)},"task-5":{id:"task-5",title:r.lorem.words(4),reporter:r.image.avatar(),priority:h.HIGH,assignee:z(4),tags:A(4),date:r.date.future(),description:r.lorem.lines(3),attachments:[],comments:O(4)},"task-6":{id:"task-6",title:r.lorem.words(5),reporter:r.image.avatar(),priority:h.LOW,assignee:z(5),tags:A(5),date:r.date.future(),description:r.lorem.lines(4),attachments:G(5),comments:O(4)}},columns:{"column-1":{id:"column-1",title:"To do",taskIds:["task-1","task-2","task-3"]},"column-2":{id:"column-2",title:"In progress",taskIds:["task-4","task-5"]},"column-3":{id:"column-3",title:"Done",taskIds:["task-6"]}},columnOrder:["column-1","column-2","column-3"]};function Se(){const[s,a]=v.useState(ge),c=t=>{const{source:n,destination:i,draggableId:m}=t,d=s.columns[n.droppableId],x=s.columns[i.droppableId];if(d===x){const l=Array.from(d.taskIds);l.splice(n.index,1),l.splice(i.index,0,m);const o={...d,taskIds:l},C={...s,columns:{...s.columns,[o.id]:o}};a(C)}else{const l=Array.from(d.taskIds);l.splice(n.index,1);const o={...d,taskIds:l},C=Array.from(x.taskIds);C.splice(i.index,0,m);const P={...x,taskIds:C},X={...s,columns:{...s.columns,[o.id]:o,[P.id]:P}};a(X)}},p=t=>{const{source:n,destination:i,draggableId:m}=t,d=Array.from(s.columnOrder);d.splice(n.index,1),d.splice(i.index,0,m);const x={...s,columnOrder:d};a(x)},w=t=>{const{source:n,destination:i,type:m}=t;i&&(i.droppableId===n.droppableId&&i.index===n.index||(m===E.COLUMN?p(t):c(t)))},[f,y]=v.useState(!1),j=v.useRef(null);Y("click",t=>{if(j.current&&!j.current.input?.contains(t.target)){const n=j.current.input?.value;n&&I({id:r.string.uuid(),title:n,taskIds:[]}),y(!1),console.log("click outside")}});const I=t=>{const n={...s,columns:{...s.columns,[t.id]:t},columnOrder:[...s.columnOrder,t.id]};a(n)},N=(t,n)=>{const i=s.columns[t],m={...s,tasks:{...s.tasks,[n.id]:n},columns:{...s.columns,[t]:{...i,taskIds:[...i.taskIds,n.id]}}};a(m)},k=t=>{const n=s.columns[t],i=Object.keys(s.tasks).filter(l=>!n.taskIds.includes(l)).reduce((l,o)=>(l[o]=s.tasks[o],l),{}),m=Object.keys(s.columns).filter(l=>l!==t).reduce((l,o)=>(l[o]=s.columns[o],l),{}),d=Array.from(s.columnOrder).filter(l=>l!==t);a({tasks:i,columns:m,columnOrder:d})},b=t=>{const n=s.columns[t],i=Object.keys(s.tasks).filter(x=>!n.taskIds.includes(x)).reduce((x,l)=>(x[l]=s.tasks[l],x),{}),m={...s.columns,[t]:{...n,taskIds:[]}},d={...s,tasks:i,columns:m};a(d)},u=t=>{const{id:n,title:i}=t,m={...s.columns,[n]:{...s.columns[n],title:i}},d={...s,columns:m};a(d)};return e.jsx(re,{children:e.jsxs("div",{className:"flex",children:[e.jsx(ie,{onDragEnd:w,children:e.jsx(q,{droppableId:"all-columns",direction:"horizontal",type:E.COLUMN,children:t=>e.jsxs("div",{ref:t.innerRef,...t.droppableProps,className:"flex h-full items-start gap-6 p-1",children:[s.columnOrder.map((n,i)=>{const m=s.columns[n],d=m.taskIds.map(x=>s.tasks[x]);return e.jsx(he,{index:i,column:m,tasks:d,createTask:N,clearColumn:b,deleteColumn:k,renameColumn:u},n)}),t.placeholder]})})}),e.jsx("div",{className:"ml-[1.6rem] mt-[0.25rem] min-w-[280px]",children:f?e.jsx(L,{ref:j,size:"large",placeholder:"Column Name",autoFocus:!0}):e.jsxs(U,{onClick:t=>{t.stopPropagation(),y(!0)},className:"!inline-flex !w-full items-center justify-center !text-xs !font-semibold",block:!0,size:"large",children:[e.jsx(g,{icon:"carbon:add",size:20}),e.jsx("div",{children:"Add Column"})]})})]})})}export{Se as default};
