import{a as t,g as Z,m as ee,r as te,c7 as re,C as M,aE as ne,aG as se,aH as oe,c as k,bA as ae,aO as ie,t as le}from"./index-8f04a448.js";import{a as ce}from"./index-cfe9be0c.js";const ge=t.createContext({}),A=ge,de=e=>{const{antCls:s,componentCls:n,iconCls:r,avatarBg:i,avatarColor:C,containerSize:v,containerSizeLG:c,containerSizeSM:S,textFontSize:d,textFontSizeLG:b,textFontSizeSM:R,borderRadius:m,borderRadiusLG:p,borderRadiusSM:z,lineWidth:y,lineType:E}=e,$=(f,g,O)=>({width:f,height:f,lineHeight:`${f-y*2}px`,borderRadius:"50%",[`&${n}-square`]:{borderRadius:O},[`${n}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${n}-icon`]:{fontSize:g,[`> ${r}`]:{margin:0}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},te(e)),{position:"relative",display:"inline-block",overflow:"hidden",color:C,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:i,border:`${y}px ${E} transparent`,"&-image":{background:"transparent"},[`${s}-image-img`]:{display:"block"}}),$(v,d,m)),{"&-lg":Object.assign({},$(c,b,p)),"&-sm":Object.assign({},$(S,R,z)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},ue=e=>{const{componentCls:s,groupBorderColor:n,groupOverlapping:r,groupSpace:i}=e;return{[`${s}-group`]:{display:"inline-flex",[`${s}`]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:r}},[`${s}-group-popover`]:{[`${s} + ${s}`]:{marginInlineStart:i}}}},L=Z("Avatar",e=>{const{colorTextLightSolid:s,colorTextPlaceholder:n}=e,r=ee(e,{avatarBg:n,avatarColor:s});return[de(r),ue(r)]},e=>{const{controlHeight:s,controlHeightLG:n,controlHeightSM:r,fontSize:i,fontSizeLG:C,fontSizeXL:v,fontSizeHeading3:c,marginXS:S,marginXXS:d,colorBorderBg:b}=e;return{containerSize:s,containerSizeLG:n,containerSizeSM:r,textFontSize:Math.round((C+v)/2),textFontSizeLG:c,textFontSizeSM:i,groupSpace:d,groupOverlapping:-S,groupBorderColor:b}});var me=globalThis&&globalThis.__rest||function(e,s){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)s.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const pe=(e,s)=>{const[n,r]=t.useState(1),[i,C]=t.useState(!1),[v,c]=t.useState(!0),S=t.useRef(null),d=t.useRef(null),b=re(s,S),{getPrefixCls:R,avatar:m}=t.useContext(M),p=t.useContext(A),z=()=>{if(!d.current||!S.current)return;const o=d.current.offsetWidth,a=S.current.offsetWidth;if(o!==0&&a!==0){const{gap:u=4}=e;u*2<a&&r(a-u*2<o?(a-u*2)/o:1)}};t.useEffect(()=>{C(!0)},[]),t.useEffect(()=>{c(!0),r(1)},[e.src]),t.useEffect(z,[e.gap]);const y=()=>{const{onError:o}=e;o?.()!==!1&&c(!1)},{prefixCls:E,shape:$,size:f,src:g,srcSet:O,icon:h,className:P,rootClassName:F,alt:_,draggable:W,children:w,crossOrigin:X}=e,N=me(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),l=ne(o=>{var a,u;return(u=(a=f??p?.size)!==null&&a!==void 0?a:o)!==null&&u!==void 0?u:"default"}),V=Object.keys(typeof l=="object"?l||{}:{}).some(o=>["xs","sm","md","lg","xl","xxl"].includes(o)),G=se(V),q=t.useMemo(()=>{if(typeof l!="object")return{};const o=oe.find(u=>G[u]),a=l[o];return a?{width:a,height:a,lineHeight:`${a}px`,fontSize:h?a/2:18}:{}},[G,l]),x=R("avatar",E),[D,J]=L(x),K=k({[`${x}-lg`]:l==="large",[`${x}-sm`]:l==="small"}),I=t.isValidElement(g),Q=$||p?.shape||"circle",U=k(x,K,m?.className,`${x}-${Q}`,{[`${x}-image`]:I||g&&v,[`${x}-icon`]:!!h},P,F,J),Y=typeof l=="number"?{width:l,height:l,lineHeight:`${l}px`,fontSize:h?l/2:18}:{};let j;if(typeof g=="string"&&v)j=t.createElement("img",{src:g,draggable:W,srcSet:O,onError:y,alt:_,crossOrigin:X});else if(I)j=g;else if(h)j=h;else if(i||n!==1){const o=`scale(${n}) translateX(-50%)`,a={msTransform:o,WebkitTransform:o,transform:o},u=typeof l=="number"?{lineHeight:`${l}px`}:{};j=t.createElement(ae,{onResize:z},t.createElement("span",{className:`${x}-string`,ref:d,style:Object.assign(Object.assign({},u),a)},w))}else j=t.createElement("span",{className:`${x}-string`,style:{opacity:0},ref:d},w);return delete N.onError,delete N.gap,D(t.createElement("span",Object.assign({},N,{style:Object.assign(Object.assign(Object.assign(Object.assign({},Y),q),m?.style),N.style),className:U,ref:b}),j))},fe=t.forwardRef(pe),T=fe,H=e=>{const{size:s,shape:n}=t.useContext(A),r=t.useMemo(()=>({size:e.size||s,shape:e.shape||n}),[e.size,e.shape,s,n]);return t.createElement(A.Provider,{value:r},e.children)},he=e=>{const{getPrefixCls:s,direction:n}=t.useContext(M),{prefixCls:r,className:i,rootClassName:C,style:v,maxCount:c,maxStyle:S,size:d,shape:b,maxPopoverPlacement:R="top",maxPopoverTrigger:m="hover",children:p}=e,z=s("avatar",r),y=`${z}-group`,[E,$]=L(z),f=k(y,{[`${y}-rtl`]:n==="rtl"},i,C,$),g=ie(p).map((h,P)=>le(h,{key:`avatar-key-${P}`})),O=g.length;if(c&&c<O){const h=g.slice(0,c),P=g.slice(c,O);return h.push(t.createElement(ce,{key:"avatar-popover-key",content:P,trigger:m,placement:R,overlayClassName:`${y}-popover`},t.createElement(T,{style:S},`+${O-c}`))),E(t.createElement(H,{shape:b,size:d},t.createElement("div",{className:f,style:v},h)))}return E(t.createElement(H,{shape:b,size:d},t.createElement("div",{className:f,style:v},g)))},ve=he,B=T;B.Group=ve;const be=B;export{be as A};
