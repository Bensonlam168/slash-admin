import{r as e,Q as t,aj as r,U as a,V as s,aN as n,W as o,aC as i,bq as l,b4 as c,aw as g,X as p,bY as u,aK as d,am as m}from"./index-f7e160de.js";import{P as f}from"./index-38a335b0.js";const h=e.createContext({}),b=e=>{const{antCls:t,componentCls:r,iconCls:n,avatarBg:o,avatarColor:i,containerSize:l,containerSizeLG:c,containerSizeSM:g,textFontSize:p,textFontSizeLG:u,textFontSizeSM:d,borderRadius:m,borderRadiusLG:f,borderRadiusSM:h,lineWidth:b,lineType:S}=e,v=(e,t,a)=>({width:e,height:e,borderRadius:"50%",[`&${r}-square`]:{borderRadius:a},[`&${r}-icon`]:{fontSize:t,[`> ${n}`]:{margin:0}}});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},a(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:i,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:o,border:`${s(b)} ${S} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),v(l,p,m)),{"&-lg":Object.assign({},v(c,u,f)),"&-sm":Object.assign({},v(g,d,h)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},S=e=>{const{componentCls:t,groupBorderColor:r,groupOverlapping:a,groupSpace:s}=e;return{[`${t}-group`]:{display:"inline-flex",[`${t}`]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:a}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:s}}}},v=t("Avatar",(e=>{const{colorTextLightSolid:t,colorTextPlaceholder:a}=e,s=r(e,{avatarBg:a,avatarColor:t});return[b(s),S(s)]}),(e=>{const{controlHeight:t,controlHeightLG:r,controlHeightSM:a,fontSize:s,fontSizeLG:n,fontSizeXL:o,fontSizeHeading3:i,marginXS:l,marginXXS:c,colorBorderBg:g}=e;return{containerSize:t,containerSizeLG:r,containerSizeSM:a,textFontSize:Math.round((n+o)/2),textFontSizeLG:i,textFontSizeSM:s,groupSpace:c,groupOverlapping:-l,groupBorderColor:g}}));var y=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]])}return r};const x=(t,r)=>{const[a,s]=e.useState(1),[d,m]=e.useState(!1),[f,b]=e.useState(!0),S=e.useRef(null),x=e.useRef(null),z=n(r,S),{getPrefixCls:O,avatar:C}=e.useContext(o),j=e.useContext(h),$=()=>{if(!x.current||!S.current)return;const e=x.current.offsetWidth,r=S.current.offsetWidth;if(0!==e&&0!==r){const{gap:a=4}=t;2*a<r&&s(r-2*a<e?(r-2*a)/e:1)}};e.useEffect((()=>{m(!0)}),[]),e.useEffect((()=>{b(!0),s(1)}),[t.src]),e.useEffect($,[t.gap]);const E=()=>{const{onError:e}=t;!1!==(null==e?void 0:e())&&b(!1)},{prefixCls:N,shape:w,size:P,src:k,srcSet:L,icon:M,className:R,rootClassName:T,alt:G,draggable:F,children:B,crossOrigin:H}=t,W=y(t,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),X=i((e=>{var t,r;return null!==(r=null!==(t=null!=P?P:null==j?void 0:j.size)&&void 0!==t?t:e)&&void 0!==r?r:"default"})),A=Object.keys("object"==typeof X&&X||{}).some((e=>["xs","sm","md","lg","xl","xxl"].includes(e))),I=l(A),q=e.useMemo((()=>{if("object"!=typeof X)return{};const e=c.find((e=>I[e])),t=X[e];return t?{width:t,height:t,fontSize:t&&(M||B)?t/2:18}:{}}),[I,X]),U=O("avatar",N),V=g(U),[_,K,Q]=v(U,V),Y=p({[`${U}-lg`]:"large"===X,[`${U}-sm`]:"small"===X}),D=e.isValidElement(k),J=w||(null==j?void 0:j.shape)||"circle",Z=p(U,Y,null==C?void 0:C.className,`${U}-${J}`,{[`${U}-image`]:D||k&&f,[`${U}-icon`]:!!M},Q,V,R,T,K),ee="number"==typeof X?{width:X,height:X,fontSize:M?X/2:18}:{};let te;if("string"==typeof k&&f)te=e.createElement("img",{src:k,draggable:F,srcSet:L,onError:E,alt:G,crossOrigin:H});else if(D)te=k;else if(M)te=M;else if(d||1!==a){const t=`scale(${a})`,r={msTransform:t,WebkitTransform:t,transform:t};te=e.createElement(u,{onResize:$},e.createElement("span",{className:`${U}-string`,ref:x,style:Object.assign({},r)},B))}else te=e.createElement("span",{className:`${U}-string`,style:{opacity:0},ref:x},B);return delete W.onError,delete W.gap,_(e.createElement("span",Object.assign({},W,{style:Object.assign(Object.assign(Object.assign(Object.assign({},ee),q),null==C?void 0:C.style),W.style),className:Z,ref:z}),te))},z=e.forwardRef(x),O=t=>{const{size:r,shape:a}=e.useContext(h),s=e.useMemo((()=>({size:t.size||r,shape:t.shape||a})),[t.size,t.shape,r,a]);return e.createElement(h.Provider,{value:s},t.children)},C=t=>{const{getPrefixCls:r,direction:a}=e.useContext(o),{prefixCls:s,className:n,rootClassName:i,style:l,maxCount:c,maxStyle:u,size:h,shape:b,maxPopoverPlacement:S="top",maxPopoverTrigger:y="hover",children:x}=t,C=r("avatar",s),j=`${C}-group`,$=g(C),[E,N,w]=v(C,$),P=p(j,{[`${j}-rtl`]:"rtl"===a},w,$,n,i,N),k=d(x).map(((e,t)=>m(e,{key:`avatar-key-${t}`}))),L=k.length;if(c&&c<L){const t=k.slice(0,c),r=k.slice(c,L);return t.push(e.createElement(f,{key:"avatar-popover-key",content:r,trigger:y,placement:S,overlayClassName:`${j}-popover`,destroyTooltipOnHide:!0},e.createElement(z,{style:u},"+"+(L-c)))),E(e.createElement(O,{shape:b,size:h},e.createElement("div",{className:P,style:l},t)))}return E(e.createElement(O,{shape:b,size:h},e.createElement("div",{className:P,style:l},k)))},j=z;j.Group=C;const $=j;export{$ as A};
