import{r as e,Q as s,j as a,ae as t,W as r,D as n,J as i,ad as l,F as c}from"./.pnpm-05c560be.js";import{c as o,T as d,I as m}from"./index-56568590.js";import{D as x,K as p,T as u}from"./kanban-task-3f854638.js";import"./task-detail-77917dd3.js";function h({index:h,column:j,tasks:g,createTask:f,clearColumn:b,deleteColumn:k,renameColumn:y}){const{themeMode:N}=o(),v={height:"100%",padding:"16px",borderRadius:"16px",backgroundColor:N===d.Light?"rgb(244, 246, 248)":"rgba(145, 158, 171, 0.12)"},C=[{key:"1",label:a.jsxs("div",{className:"flex items-center text-gray",onClick:()=>{S(!0)},children:[a.jsx(m,{icon:"solar:pen-bold"}),a.jsx("span",{className:"ml-2",children:"rename"})]})},{key:"2",label:a.jsxs("div",{className:"flex items-center text-gray",onClick:()=>b(j.id),children:[a.jsx(m,{icon:"solar:eraser-bold"}),a.jsx("span",{className:"ml-2",children:"clear"})]})},{key:"3",label:a.jsxs("div",{className:"flex items-center text-warning",onClick:()=>k(j.id),children:[a.jsx(m,{icon:"solar:trash-bin-trash-bold"}),a.jsx("span",{className:"ml-2",children:"delete"})]})}],[R,T]=e.useState(!1),P=e.useRef(null);s("click",(e=>{if(P.current&&!P.current.input?.contains(e.target)){const e=P.current.input?.value;e&&f(j.id,{id:c.string.uuid(),title:e,reporter:c.image.avatarGitHub(),priority:c.helpers.enumValue(u)}),T(!1)}if(w.current&&!w.current.input?.contains(e.target)){const e=w.current.input?.value;e&&y({...j,title:e}),S(!1)}}));const[z,S]=e.useState(!1),w=e.useRef(null),[F,I]=e.useState(!1),A=e=>{I(!1),e.domEvent.stopPropagation()};return a.jsx(t,{draggableId:j.id,index:h,children:e=>a.jsx("div",{ref:e.innerRef,...e.draggableProps,children:a.jsxs("div",{style:v,children:[a.jsxs("header",{...e.dragHandleProps,className:"mb-4 flex select-none items-center justify-between text-base font-semibold",children:[z?a.jsx(r,{ref:w,size:"large",autoFocus:!0}):j.title,a.jsx(n,{open:F,onOpenChange:e=>I(e),menu:{items:C,onClick:A},placement:"bottomRight",trigger:["click"],children:a.jsx(i,{shape:"circle",type:"text",className:"!text-gray",children:a.jsx(m,{icon:"dashicons:ellipsis"})})})]}),a.jsx(l,{droppableId:j.id,type:x.TASK,children:e=>a.jsxs("main",{ref:e.innerRef,...e.droppableProps,className:"min-h-[10px]",children:[g.map(((e,s)=>a.jsx(p,{task:e,index:s},e.id))),e.placeholder]})}),a.jsx("footer",{className:"w-[248px]",children:R?a.jsx(r,{ref:P,size:"large",placeholder:"Task Name",autoFocus:!0}):a.jsxs(i,{onClick:e=>{e.stopPropagation(),T(!0)},className:"!flex items-center justify-center !text-xs !font-medium",type:"text",block:!0,size:"large",children:[a.jsx(m,{icon:"carbon:add",size:20}),a.jsx("span",{children:"Add Task"})]})})]})})})}export{h as default};
